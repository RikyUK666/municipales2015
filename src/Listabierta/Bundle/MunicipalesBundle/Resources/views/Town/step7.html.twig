{% extends 'MunicipalesBundle:theme:layout.html.twig' %}

{% block title %}{{ 'town.step7.html_title'|trans }}{% endblock %}

{% from 'MunicipalesBundle:macros:steps.html.twig' import steps_town_widget %}
{% form_theme form 'MunicipalesBundle:theme:forms.html.twig' %}

{% block content %}
<section class="section-2">
      <div class="container marketing">

        <div class="headline">
          <h2>{{ 'home.step_h2'|trans }} 4</h2>
        </div><h3 class="featurette-headin"> <i>{{ 'town.step7.h1_title'|trans }}</i>
        </h3>
        
        <!-- START THE FEATURETTES -->

        <hr class="featurette-divider2">
        <!--    division -->
        
        {{ form_start(form, { 'attr': {'class': 'form_settings', 'id': 'town_step7'}}) }}
        
        <div class="row featurette2">
          <div class="widget-box">
            

            <div class="widget-body">
              <div class="widget-main">
              
              	
              	
                <div id="fuelux-wizard-container">
                  {{ steps_town_widget(4, address) }}
                  
				  <hr>

                  <div class="step-content pos-rel container-fluid">
                  
				  {% if not form.vars.valid and form.vars.errors|length > 0 %}
                  <div class="alert alert-danger">
                          <button data-dismiss="alert" class="close" type="button">
                            <i class="mine-icon fa fa-times"></i>
                          </button>
                          {{ form_errors(form) }}
                  </div>
                  {% endif %}

                  {# 
							
							Sugerencia de algoritmo para la selección de candidatos:
					
							Comenzar el filtro desde el “más importante” al “menos importante” 
							hasta que quede un número de candidatos de X
				  #}
                  <div class="row dataTables_wrappero">
                      <div class="col-xs-12 candidatos">
                        {% if candidates|length > 0 %}
                        	{% for candidate in candidates %}

                        <div class="row widget-box ">

                          <div class="col-xs-12 col-sm-5">
                            <div class="profile-user-info-striped">
                              <div class="profile-info-row">
                                <div class="profile-info-name">Nivel académico</div>
                                <div class="profile-info-value">
                                  <span class="lalala">
                            		{% if candidate.academicLevel is defined %}
                                    {% set academic_level_text = { 	'0' : 'Me resulta indiferente su nivel académico',
													     			'1' : 'Sin estudios',
													     			'2' : 'Estudios primarios o equivalentes', 
													     			'3' : 'Enseñanza general secundaria, 1er ciclo',
													     			'4' : 'Enseñanza Profesional de 2º grado, 2º ciclo',
													     			'5' : 'Enseñanza general secundaria, 2º ciclo',
													     			'6' : 'Enseñanzas profesionales superiores',
													     			'7' : 'Estudios universitarios o equivalentes',
													     			'8' : 'Máster universitario o doctorado'
																}
									%}
										{% if candidate.academicLevel > -1 %}
											{{ academic_level_text[candidate.academicLevel] }}
	                                    {% endif %}
                                    {% endif %}      
                        			</span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Idiomas</div>
                                <div class="profile-info-value">
                                  <span class="lalala">
                                  {% if candidate.languages is defined %}
                                    {% set languages_text = { 	'0' : 'No considero necesario que hable idiomas',
																'1' : 'Inglés',
											     				'2' : 'Otro idioma europeo',
											     				'3' : 'Otro idioma no europeo',
											     				'4' : 'Catalá',
											     				'5' : 'Galego',
											     				'6' : 'Euskara',
											     				'7' : 'Valenciá',
									}
									%}
										{% if candidate.languages|length > 0 %}
											<ul>
											{% for languages in candidate.languages %}
												<li>{{ languages_text[languages] }}</li>
											{% endfor %}
											</ul>
	                                    {% endif %}
                                    {% endif %}
									</span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Valores morales que prioriza</div>
                                <div class="profile-info-value">
                                  <span id="" class="">
                                  {% if candidate.publicValues is defined %}
                                    {% set public_values_text = { 	'1' : 'HONESTIDAD',
												     				'2' : 'TRANSPARENCIA',
												     				'3' : 'RESPETO',
												     				'4' : 'RESPONSABILIDAD',
												     				'5' : 'COMPROMISO',
												     				'6' : 'INTEGRIDAD',
												     				'7' : 'IGUALDAD',
												     				'8' : 'TOLERANCIA',
												     				'9' : 'COOPERACIÓN',
												     				'10' : 'SOLIDARIDAD',
												     				'11' : 'JUSTICIA'
									}
									%}
										{% if candidate.publicValues|length > 0 %}
											<ul>
											{% for public_values in candidate.publicValues %}
												<li>{{ public_values_text[public_values] }}</li>
											{% endfor %}
											</ul>
	                                    {% endif %}
                                    {% endif %}
                        	
                        			</span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Experiencia laboral</div>
                                <div class="profile-info-value">
                                  <span class="lalala">
                                  	{% if candidate.jobExperience is defined %}
                                    {% set job_experience_text = { 	'1' : 'Actividades físicas o deportivas',
												     				'2' : 'Administración o gestión',
												     				'3' : 'Agraria o pesquera',
												     				'4' : 'Arte o artesanía',
												     				'5' : 'Comercio y marketing',
												     				'6' : 'Edificación, obra civil',
												     				'7' : 'Energía o agua',
												     				'8' : 'Mecánica, electricidad o electrónica',
												     				'9' : 'Hostelería y turismo',
												     				'10' : 'Informática o comunicaciones',
												     				'11' : 'Industria',
												     				'12' : 'Sanidad',
												     				'13' : 'Medio Ambiente',
												     				'14' : 'Educación o servicios a la comunidad',
												     				'15' : 'Transporte',
												     				'16' : 'Finanzas'}
									%}
										{% if candidate.jobExperience|length > 0 %}
											<ul>
											{% for job_experience in candidate.jobExperience %}
												<li>{{ job_experience_text[job_experience] }}</li>
											{% endfor %}
											</ul>
	                                    {% endif %}
                                    {% endif %}
                                  </span>
                                </div>
                              </div>
                            </div>
                            <hr>
                            <div class="profile-user-info-striped">
                              <div class="profile-info-row">
                                <div class="profile-info-name">Experiencias relacionadas</div>
                                <div class="profile-info-value">
                                  <span class="lalala" id="age">
                                    {% if candidate.townActivities is defined %}
                                    {% set town_activities_text = { '1' : 'He tenido experiencia en la mejora del funcionamiento organizativo de entidades',
												     				'2' : 'He participado en la elaboración de planes de protección civil o seguridad ciudadana',
												     				'3' : 'He contribuido a la lucha contra la pobreza o la exclusión social',
												     				'4' : 'He gestionado actividades de atención sanitaria',
												     				'5' : 'He gestionado actividades educativas o culturales',
												     				'6' : 'He gestionado planes de infraestructura, vivienda o urbanismo',
												     				'7' : 'He gestionado actividades de fomento de la sostenibilidad o protección medioambiental',
												     				'8' : 'He gestionado actividades de fomento del empleo',
												     				'9' : 'He gestionado actividades de fomento de la transparencia, la participación ciudadana o la igualdad de género',
												     				'10' : 'He gestionado actividades colectivas en el campo industrial o agrícola',
												     				'11' : 'He gestionado actividades colectivas en el campo de las tecnologías de la información o la comunicación',
												     				'12' : 'He gestionado actividades colectivas de investigación o desarrollo',
												     				'13' : 'He gestionado actividades colectivas en el campo del cooperativismo',
												     				'14' : 'He gestionado eficazmente presupuestos superiores al millón de euros',
												     				'15' : 'He tenido experiencia de trabajo internacional',
												     				'16' : 'He realizado funciones de representación o portavocía de colectivos'}
									%}
										{% if candidate.townActivities|length > 0 %}
											<ul>
											{% for activity in candidate.townActivities %}
												<li>{{ town_activities_text[activity] }}</li>
											{% endfor %}
											</ul>
	                                    {% endif %}
                                    {% endif %}
                                  </span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Descripción experiencia</div>
                                <div class="profile-info-value">
                                  <span class="lalala" id="login">{% if candidate.townActivitiesExplanation is defined %}{{ candidate.townActivitiesExplanation }}{% endif %}</span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xs-12 col-sm-4">
                            <div class="profile-user-info-striped">
                              <div class="profile-info-row">
                                <div class="profile-info-name">Considera prioritario que el Ayuntamiento se centre en:</div>
                                <div class="profile-info-value">
                                  <span id="age" class="lalala">
                                  {% if candidate.governPriorities is defined %}
                                    {% set govern_priorities_text = {   '1' : 'Mejorar las funciones de gobierno del municipio',
													     				'2' : 'Mejorar la seguridad ciudadana',
													     				'3' : 'Luchar contra la pobreza y la exclusión social',
													     				'4' : 'Mejorar la atención sanitaria',
													     				'5' : 'Mejorar la gestión educativa y cultural',
													     				'6' : 'Atender a los problemas de vivienda, urbanismo e infraestructuras',
													     				'7' : 'Mejorar la sostenibilidad del municipio',
													     				'8' : 'Invertir en fomento del empleo',
													     				'9' : 'Aumentar la participación ciudadana en la gestión municipal',
													     				'10' : 'Mejorar los servicios de transporte',
													     				'11' : 'Invertir en actividades industriales, agrícolas o comerciales',
													     				'12' : 'Invertir en Investigación',
													     				'13' : 'Gestionar mejor la deuda y las operaciones financieras',
									}
									%}
										{% if candidate.governPriorities|length > 0 %}
											<ul>
											{% for govern_priorities in candidate.governPriorities %}
												<li>{{ govern_priorities_text[govern_priorities] }}</li>
											{% endfor %}
											</ul>
	                                    {% endif %}
                                    {% endif %}
                                  </span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Motivación para presentarse</div>
                                <div class="profile-info-value">
                                  <span id="" class="">{% if candidate.motivationText is defined %}{{ candidate.motivationText }}{% endif %}</span>
                                </div>
                              </div>
                              <div class="profile-info-row">
                                <div class="profile-info-name">Biografía e información adicional</div>
                                <div class="profile-info-value">
                                  <span class="lalala" id="login">{% if candidate.additionalInfo is defined %}{{ candidate.additionalInfo }}{% endif %}</span>
                                </div>
                              </div>

                            </div>
                          </div>
                          <div class="col-xs-12 col-sm-3 center">
                            <div>
                              <span class="profile-picture">
                                <img src="{{ app.request.schemeAndHttpHost }}/{{ documents_path }}{{ candidate.id }}/photo/photo.jpg" alt="{{ candidate.name }} {{ candidate.lastname }} Avatar" class="editable img-responsive editable-click editable-empty" id="avatar"></span>
                              <div class="space-4"></div>
                              <div class="label label-info label-xlg ">
                                <div class="inline position-relative">
                                  <span>
                                    <span class="white">{{ candidate.name }} {{ candidate.lastname }}</span>
                                  </span>
                                </div>
                              </div>
                            </div>
                            <div class="space-6"></div>
                            <div class="hr hr12 dotted"></div>
                            <div class="clearfix">
                              <div class="grid2 candidate-{{ candidate.id }}">
                                <span class="bigger-175 blue">{{ loop.index }} de {{ candidates|length }}</span>
                                <br>Posición</div>
                              <div class="grid2">
                                <div class="profile-info-value">
                                  <label>
                                    {% if candidate.status == 1 %}
												<select class="form-control input-sm" aria-controls="dynamic-table" required="required" name="town_step_7[candidate_{{ candidate.id }}]" id="candidate_{{ candidate.id }}">
													{% for index in 1..candidates|length  %}
														<option>{{ index }}</option>
													{% endfor %}
												</select>
									{% endif %}
                                    Candidatos
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div class="hr hr16 dotted"></div>
                          </div>
                        </div>
                        <hr>
                        	{% endfor %}
                        {% endif %}
                      </div>
                    </div>

                    </div>
                  </div>
                </div>

                <hr>
                <div class="wizard-actions">

				  <button class="btn btn-prev" onclick="location.href='{{ path('town_candidacy_vote_step2', {'address' : address }) }}'; return false;">
                    <i class="mine-icon fa fa-arrow-left"></i>
                    {{ 'town.step7.previous'|trans }}
                  </button>
                  
                  {{ form_widget(form.continue, { 'label': 'town.step7.continue'|trans|raw, 'attr' : { 'class' : 'submit btn btn-success btn-next'} }) }}

                </div>
              </div>
              
              
              <!-- /.widget-main --> </div>
            <!-- /.widget-body --> </div>
        </div>

        {{ form_rest(form) }}
			
		{{ form_end(form) }}
			  
        <!--    division -->

        <!-- /END THE FEATURETTES --> </div>
        
</section>
{% endblock %}